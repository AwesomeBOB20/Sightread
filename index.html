<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>RDM Sightreading Rhythm Generator</title>
  <link rel="stylesheet" href="./styles.css" />
  <script src="https://cdn.jsdelivr.net/npm/vexflow@4.2.5/build/cjs/vexflow.js"></script>
</head>
<body>
  <div class="wrap">
    
    <div class="top-content-row">
      
      <header class="top">
        <h3 class="card-title">Parameters</h3>
        <div class="controls">
          <div class="control-row-top">
            <div class="rdm-field slider-field">
              <div class="fieldHead">
                <span class="fieldLabel">Tempo</span>
                <span class="fieldValue">
                    <canvas id="tempoIcon" width="24" height="24" style="vertical-align: middle; margin-right:4px;"></canvas> 
                    = <span id="tempoVal">100</span>
                </span>
              </div>
              <input id="tempo" class="slider-purple" type="range" min="40" max="220" value="100" />
            </div>

            <div class="rdm-field slider-field">
              <div class="fieldHead">
                <span class="fieldLabel">Rests</span>
                <span class="fieldValue"><span id="restsVal">20</span>%</span>
              </div>
              <input id="rests" class="slider-orange" type="range" min="0" max="60" value="20" />
            </div>
          </div>

          <div class="unified-toolbar">
            
            <div class="rdm-field">
              <span class="fieldLabel">Measures</span>
              <input id="measures" type="number" min="1" max="32" value="8" />
            </div>

            <div class="rdm-field">
              <span class="fieldLabel">Time Sig</span>
              <div class="select-wrapper">
                  <input id="timeSigInput" class="white-select" type="text" readonly value="4/4" />
                  <div class="chevron">▼</div>
              </div>
            </div>

            <div class="rdm-field">
              <span class="fieldLabel">Sticking Pattern</span>
              <div class="select-wrapper">
                  <input id="stickingInput" class="white-select" type="text" readonly value="Natural" />
                  <div class="chevron">▼</div>
              </div>
            </div>

            <div class="rdm-field">
               <span class="fieldLabel">Lead Hand</span>
               <div class="toggle-switch-purple smart-toggle">
                  <input id="leadHandToggle" type="checkbox" checked>
                  <span class="opt-L">L</span>
                  <span class="opt-R">R</span>
               </div>
            </div>

            <div class="checkbox-cluster">
               <div class="check-purple smart-toggle">
                  <input id="showSticking" type="checkbox" checked>
                  <span class="checkmark"></span> Sticking
               </div>
               <div class="check-purple smart-toggle">
                  <input id="showCounts" type="checkbox" checked>
                  <span class="checkmark"></span> Counts
               </div>
               <div class="check-purple smart-toggle">
                  <input id="metronomeToggle" type="checkbox" checked>
                  <span class="checkmark"></span> Metronome
               </div>
               <div class="check-purple smart-toggle">
                  <input id="allowSyncopation" type="checkbox" checked>
                  <span class="checkmark"></span> Syncopation
               </div>
            </div>

          </div>

          </div>
      </header>

      <div class="optionsCard">
        <div style="width:100%; display:flex; flex-wrap:wrap; justify-content:space-between; align-items:center; gap:12px;">
            <h3 class="card-title">Rhythms</h3>
            <div class="quick-select-row">
    <button id="btnAll" class="btn btn-quick">All</button>
    <button id="btnFull" class="btn btn-quick">Full</button>
    <button id="btnRandom" class="btn btn-quick">Random</button>
    <button id="btnStraight" class="btn btn-quick">Duple</button>
    <button id="btnTriplets" class="btn btn-quick">Triplet</button>
    <button id="btnNone" class="btn btn-quick">Deselect</button>
</div>
        </div>
        
        <div class="rhythm-tile-wrapper">
            <div class="rhythmTile" title="Dotted Quarters">
              <input id="allowDottedQuarters" type="checkbox" checked />
              <span class="rhythmTick" aria-hidden="true"></span>
              <div class="rhythmIcon" data-type="dottedQ">
                <canvas id="dottedQuarterIcon" class="rhythmCanvas" width="160" height="90"></canvas>
              </div>
              <span class="srOnly">Dotted Quarter</span>
            </div>

            <div class="rhythmTile" title="Quarters">
              <input id="allowQuarters" type="checkbox" checked />
              <span class="rhythmTick" aria-hidden="true"></span>
              <div class="rhythmIcon" data-type="q">
                <canvas id="quarterIcon" class="rhythmCanvas" width="160" height="90"></canvas>
              </div>
              <span class="srOnly">Quarter Notes</span>
            </div>

            <div class="rhythmTile" title="Quarter Triplets">
              <input id="allowQuarterTriplets" type="checkbox" checked />
              <span class="rhythmTick" aria-hidden="true"></span>
              <div class="rhythmIcon" data-type="qt">
                <canvas id="quarterTripletIcon" class="rhythmCanvas" width="160" height="90"></canvas>
              </div>
              <span class="srOnly">Quarter Triplets</span>
            </div>

            <div class="rhythmTile" title="8ths">
              <input id="allow8ths" type="checkbox" checked />
              <span class="rhythmTick" aria-hidden="true"></span>
              <div class="rhythmIcon" data-type="8s">
                <canvas id="eighthIcon" class="rhythmCanvas" width="160" height="90"></canvas>
              </div>
              <span class="srOnly">8th Notes</span>
            </div>

            <div class="rhythmTile" title="8th 5lets">
              <input id="allowQuintuplets" type="checkbox" checked />
              <span class="rhythmTick" aria-hidden="true"></span>
              <div class="rhythmIcon" data-type="5let">
                <canvas id="quintupletIcon" class="rhythmCanvas" width="160" height="90"></canvas>
              </div>
              <span class="srOnly">8th 5lets</span>
            </div>

            <div class="rhythmTile" title="Triplets">
              <input id="allowTriplets" type="checkbox" checked />
              <span class="rhythmTick" aria-hidden="true"></span>
              <div class="rhythmIcon" data-type="8t">
                <canvas id="tripletIcon" class="rhythmCanvas" width="160" height="90"></canvas>
              </div>
              <span class="srOnly">Triplets</span>
            </div>

            <div class="rhythmTile" title="16ths">
              <input id="allow16ths" type="checkbox" checked />
              <span class="rhythmTick" aria-hidden="true"></span>
              <div class="rhythmIcon" data-type="16s">
                <canvas id="sixteenthIcon" class="rhythmCanvas" width="160" height="90"></canvas>
              </div>
              <span class="srOnly">16th Notes</span>
            </div>    

            <div class="rhythmTile" title="9lets">
              <input id="allow9lets" type="checkbox" checked />
              <span class="rhythmTick" aria-hidden="true"></span>
              <div class="rhythmIcon" data-type="9let">
                <canvas id="nineletIcon" class="rhythmCanvas" width="160" height="90"></canvas>
              </div>
              <span class="srOnly">9-lets</span>
            </div>

            <div class="rhythmTile" title="5lets">
              <input id="allow16thQuintuplets" type="checkbox" checked />
              <span class="rhythmTick" aria-hidden="true"></span>
              <div class="rhythmIcon" data-type="5let16">
                <canvas id="sixteenthQuintupletIcon" class="rhythmCanvas" width="160" height="90"></canvas>
              </div>
              <span class="srOnly">5-lets</span>
            </div>

            <div class="rhythmTile" title="6lets">
              <input id="allowSextuplets" type="checkbox" checked />
              <span class="rhythmTick" aria-hidden="true"></span>
              <div class="rhythmIcon" data-type="6let">
                <canvas id="sextupletIcon" class="rhythmCanvas" width="160" height="90"></canvas>
              </div>
              <span class="srOnly">6-lets</span>
            </div>
        </div>
      </div>
      
    </div>

    <main class="main">
      <div id="error" class="error" hidden></div>
      <div id="scoreWrap" class="scoreWrap">
        <div class="score-header-row">
            <h3 class="card-title">Sheet Music</h3>

            <div class="header-buttons">
              <button id="undo" class="btn btn-purple" disabled style="padding: 0 14px; font-size: 1.2rem;" title="Undo">↩</button>
              
              <button id="regen" class="btn btn-purple">Regenerate</button>
              <button id="play" class="btn btn-orange">Play</button>
              <button id="stop" class="btn btn-blue" disabled>Stop</button>
            </div>

            <div id="status" class="statusChip statusChip--ok">
                <span class="dot" aria-hidden="true"></span>
                <span class="statusText">Ready.</span>
            </div>
        </div>

        <div class="bar">
          <div id="progressBar" class="bar__fill"></div>
          <div class="time-display">
            <span id="currentTime">0:00</span> / <span id="totalTime">0:00</span>
          </div>
        </div>

        <div class="scoreStack">
          <canvas id="score" class="score"></canvas>
          <canvas id="playhead" class="playhead" aria-hidden="true"></canvas>
        </div>
        
      </div>

    </main>
  </div>

<div id="pickerOverlay" class="picker-overlay" hidden aria-hidden="true">
    <div class="picker__modal">
      <div class="picker__header">
        <h3 id="pickerTitle" class="picker__title">Select</h3>
        <button id="pickerClose" class="picker__close" aria-label="Close">&times;</button>
      </div>
      <ul id="pickerList" class="picker__list" role="listbox"></ul>
    </div>
  </div>

  <script src="./main.js"></script>
</body>
</html>