<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>RDM Sightreading Rhythm Generator</title>
  <link rel="stylesheet" href="./styles.css" />
  <script src="https://cdn.jsdelivr.net/npm/vexflow@4.2.5/build/cjs/vexflow.js"></script>
</head>
<body>
  <div class="wrap">
    
    <div class="top-content-row">
      
      <header class="top">
        <h3 class="card-title">Parameters</h3>
        <div class="controls">
          <div class="control-row-top">
            <label class="rdm-field slider-field">
              <div class="fieldHead">
                <span class="fieldLabel">Tempo</span>
                <span class="fieldValue"><span id="tempoVal">100</span> bpm</span>
              </div>
              <input id="tempo" class="slider-purple" type="range" min="40" max="220" value="100" />
            </label>

            <label class="rdm-field slider-field">
              <div class="fieldHead">
                <span class="fieldLabel">Rests</span>
                <span class="fieldValue"><span id="restsVal">20</span>%</span>
              </div>
              <input id="rests" class="slider-orange" type="range" min="0" max="60" value="20" />
            </label>
          </div>

          <div class="unified-toolbar">
            
            <div class="rdm-field" style="width: 80px;">
              <span class="fieldLabel">Measures</span>
              <input id="measures" type="number" min="1" max="32" value="8" />
            </div>

            <div class="rdm-field" style="width: 180px;">
              <span class="fieldLabel">Sticking Pattern</span>
              <div class="select-wrapper">
                  <input id="stickingInput" class="white-select" type="text" readonly value="Natural" />
                  <div class="chevron">â–¼</div>
              </div>
            </div>

            <div class="rdm-field" style="width: auto; flex-grow: 0;">
               <span class="fieldLabel">Lead Hand</span>
               <label class="toggle-switch-purple">
                  <input id="leadHandToggle" type="checkbox" checked>
                  <span class="opt-L">L</span>
                  <span class="opt-R">R</span>
               </label>
            </div>

            <div class="checkbox-cluster">
               <label class="check-purple">
                  <input id="showSticking" type="checkbox" checked>
                  <span class="checkmark"></span> Sticking
               </label>
               <label class="check-purple">
                  <input id="showCounts" type="checkbox" checked>
                  <span class="checkmark"></span> Counts
               </label>
               <label class="check-purple">
                  <input id="metronomeToggle" type="checkbox" checked>
                  <span class="checkmark"></span> Metronome
               </label>
            </div>

          </div>

          </div>
      </header>

      <div class="optionsCard">
        <h3 class="card-title">Rhythms</h3>
        
        <div class="rhythm-tile-wrapper">
            <label class="rhythmTile" title="8th Notes">
              <input id="allow8ths" type="checkbox" checked />
              <span class="rhythmTick" aria-hidden="true"></span>
              <span class="rhythmIcon" aria-hidden="true">
                <canvas id="eighthIcon" class="rhythmCanvas" width="160" height="90"></canvas>
              </span>
              <span class="srOnly">8th Notes</span>
            </label>

            <label class="rhythmTile" title="16th Notes">
              <input id="allow16ths" type="checkbox" checked />
              <span class="rhythmTick" aria-hidden="true"></span>
              <span class="rhythmIcon" aria-hidden="true">
                <canvas id="sixteenthIcon" class="rhythmCanvas" width="160" height="90"></canvas>
              </span>
              <span class="srOnly">16th Notes</span>
            </label>

            <label class="rhythmTile" title="Triplets">
              <input id="allowTriplets" type="checkbox" checked />
              <span class="rhythmTick" aria-hidden="true"></span>
              <span class="rhythmIcon" aria-hidden="true">
                <canvas id="tripletIcon" class="rhythmCanvas" width="160" height="90"></canvas>
              </span>
              <span class="srOnly">Triplets</span>
            </label>

            <label class="rhythmTile" title="Quarter Triplets">
              <input id="allowQuarterTriplets" type="checkbox" checked />
              <span class="rhythmTick" aria-hidden="true"></span>
              <span class="rhythmIcon" aria-hidden="true">
                <canvas id="quarterTripletIcon" class="rhythmCanvas" width="160" height="90"></canvas>
              </span>
              <span class="srOnly">Quarter Triplets</span>
            </label>

            <label class="rhythmTile" title="5-lets">
              <input id="allowQuintuplets" type="checkbox" checked />
              <span class="rhythmTick" aria-hidden="true"></span>
              <span class="rhythmIcon" aria-hidden="true">
                <canvas id="quintupletIcon" class="rhythmCanvas" width="160" height="90"></canvas>
              </span>
              <span class="srOnly">5-lets</span>
            </label>

            <label class="rhythmTile" title="6-lets">
              <input id="allowSextuplets" type="checkbox" checked />
              <span class="rhythmTick" aria-hidden="true"></span>
              <span class="rhythmIcon" aria-hidden="true">
                <canvas id="sextupletIcon" class="rhythmCanvas" width="160" height="90"></canvas>
              </span>
              <span class="srOnly">6-lets</span>
            </label>
        </div>
      </div>
      
    </div>

    <main class="main">
      <div id="error" class="error" hidden></div>
      <div id="scoreWrap" class="scoreWrap">
        <div class="score-header-row">
            <h3 class="card-title">Sheet Music</h3>
            <div id="status" class="statusChip statusChip--ok">
                <span class="dot" aria-hidden="true"></span>
                <span class="statusText">Ready.</span>
            </div>
        </div>

        <div class="btnRow" style="margin-bottom: 12px;">
            <button id="regen" class="btn btn-purple">Regenerate</button>
            <button id="play" class="btn btn-orange">Play</button>
            <button id="stop" class="btn btn-blue" disabled>Stop</button>
        </div>

        <div class="bar">
          <div id="progressBar" class="bar__fill"></div>
          <div class="time-display">
            <span id="currentTime">0:00</span> / <span id="totalTime">0:00</span>
          </div>
        </div>

        <div class="scoreStack">
          <canvas id="score" class="score"></canvas>
          <canvas id="playhead" class="playhead" aria-hidden="true"></canvas>
        </div>
        
      </div>

    </main>
  </div>

<div id="pickerOverlay" class="picker-overlay" hidden aria-hidden="true">
    <div class="picker__modal">
      <div class="picker__header">
        <h3 id="pickerTitle" class="picker__title">Select</h3>
        <button id="pickerClose" class="picker__close" aria-label="Close">&times;</button>
      </div>
      <ul id="pickerList" class="picker__list" role="listbox"></ul>
    </div>
  </div>

  <script src="./main.js"></script>
</body>
</html>